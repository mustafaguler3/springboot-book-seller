{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\Mustafa GULER\\\\Desktop\\\\react-project\\\\react-product\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"C:\\\\Users\\\\Mustafa GULER\\\\Desktop\\\\react-project\\\\react-product\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"C:\\\\Users\\\\Mustafa GULER\\\\Desktop\\\\react-project\\\\react-product\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport React from \"react\";\nimport { useEffect, useState } from \"react\";\nimport User from \"../../models/user\";\nimport { useSelector } from \"react-redux\";\nimport AuthenticationService from \"../../services/authentication.service\";\n\nvar Register = function Register() {\n  var _useState = useState(new User(\"\", \"\", \"\")),\n      _useState2 = _slicedToArray(_useState, 2),\n      user = _useState2[0],\n      setUser = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      submitted = _useState6[0],\n      setSubmitted = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      errorMessage = _useState8[0],\n      setErrorMessage = _useState8[1];\n\n  var currentUser = useSelector(function (state) {\n    return state.user;\n  });\n  var navigate = useNavigate(); //mounted\n\n  useEffect(function () {\n    if (currentUser?.id) {\n      navigate(\"/profile\");\n    }\n  }, []);\n\n  var handleChange = function handleChange(e) {\n    var _e$target = e.target,\n        name = _e$target.name,\n        value = _e$target.value;\n    setUser(function (prevState) {\n      return _objectSpread({}, prevState, _defineProperty({}, name, value));\n    });\n  };\n\n  var handleRegister = function handleRegister() {\n    setSubmitted(true);\n\n    if (!user.username || !user.password || !user.name) {\n      return;\n    }\n\n    setLoading(true);\n    AuthenticationService.register(user).then(function (_) {\n      navigate(\"/login\");\n    }).catch(function (err) {\n      if (err?.response?.status === 409) {\n        setErrorMessage(\"username or password is not valid\");\n      } else {\n        setErrorMessage(\"Unexpected error occurred\");\n      }\n\n      setLoading(false);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null);\n};\n\nexport default Register;","map":{"version":3,"names":["React","useEffect","useState","User","useSelector","AuthenticationService","Register","user","setUser","loading","setLoading","submitted","setSubmitted","errorMessage","setErrorMessage","currentUser","state","navigate","useNavigate","id","handleChange","e","target","name","value","prevState","handleRegister","username","password","register","then","_","catch","err","response","status"],"sources":["C:/Users/Mustafa GULER/Desktop/react-project/react-product/src/pages/register/register.page.js"],"sourcesContent":["import React from \"react\";\r\nimport { useEffect ,useState} from \"react\"\r\nimport User from \"../../models/user\"\r\nimport {useSelector} from \"react-redux\"\r\nimport AuthenticationService from \"../../services/authentication.service\"\r\n\r\nconst Register = () =>{\r\n\r\n    const [user,setUser] = useState(new User(\"\",\"\",\"\"))\r\n    const [loading,setLoading] = useState(false)\r\n    const [submitted,setSubmitted] = useState(false)\r\n    const [errorMessage,setErrorMessage] = useState(\"\")\r\n\r\n    const currentUser = useSelector(state => state.user)\r\n\r\n    const navigate = useNavigate()\r\n\r\n    //mounted\r\n    useEffect(()=>{\r\n        if(currentUser?.id){\r\n            navigate(\"/profile\")\r\n        }\r\n    },[])\r\n\r\n\r\n    const handleChange = (e) => {\r\n        const {name,value} = e.target\r\n\r\n        setUser((prevState) => {\r\n            return {\r\n                ...prevState,\r\n                [name]: value\r\n            }\r\n        })\r\n    }\r\n\r\n    const handleRegister = () => {\r\n        setSubmitted(true);\r\n\r\n        if(!user.username || !user.password || !user.name){\r\n            return;\r\n        }\r\n\r\n        setLoading(true)\r\n\r\n        AuthenticationService.register(user).then(_=>{\r\n            navigate(\"/login\");\r\n        }).catch(err => {\r\n            if(err?.response?.status === 409){\r\n                setErrorMessage(\"username or password is not valid\")\r\n            }else {\r\n                setErrorMessage(\"Unexpected error occurred\")\r\n            }\r\n            setLoading(false)\r\n        })\r\n    }\r\n\r\n    return (\r\n        <>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Register;"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,EAAoBC,QAApB,QAAmC,OAAnC;AACA,OAAOC,IAAP,MAAiB,mBAAjB;AACA,SAAQC,WAAR,QAA0B,aAA1B;AACA,OAAOC,qBAAP,MAAkC,uCAAlC;;AAEA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,GAAK;EAAA,gBAEKJ,QAAQ,CAAC,IAAIC,IAAJ,CAAS,EAAT,EAAY,EAAZ,EAAe,EAAf,CAAD,CAFb;EAAA;EAAA,IAEXI,IAFW;EAAA,IAENC,OAFM;;EAAA,iBAGWN,QAAQ,CAAC,KAAD,CAHnB;EAAA;EAAA,IAGXO,OAHW;EAAA,IAGHC,UAHG;;EAAA,iBAIeR,QAAQ,CAAC,KAAD,CAJvB;EAAA;EAAA,IAIXS,SAJW;EAAA,IAIDC,YAJC;;EAAA,iBAKqBV,QAAQ,CAAC,EAAD,CAL7B;EAAA;EAAA,IAKXW,YALW;EAAA,IAKEC,eALF;;EAOlB,IAAMC,WAAW,GAAGX,WAAW,CAAC,UAAAY,KAAK;IAAA,OAAIA,KAAK,CAACT,IAAV;EAAA,CAAN,CAA/B;EAEA,IAAMU,QAAQ,GAAGC,WAAW,EAA5B,CATkB,CAWlB;;EACAjB,SAAS,CAAC,YAAI;IACV,IAAGc,WAAW,EAAEI,EAAhB,EAAmB;MACfF,QAAQ,CAAC,UAAD,CAAR;IACH;EACJ,CAJQ,EAIP,EAJO,CAAT;;EAOA,IAAMG,YAAY,GAAG,SAAfA,YAAe,CAACC,CAAD,EAAO;IAAA,gBACHA,CAAC,CAACC,MADC;IAAA,IACjBC,IADiB,aACjBA,IADiB;IAAA,IACZC,KADY,aACZA,KADY;IAGxBhB,OAAO,CAAC,UAACiB,SAAD,EAAe;MACnB,yBACOA,SADP,sBAEKF,IAFL,EAEYC,KAFZ;IAIH,CALM,CAAP;EAMH,CATD;;EAWA,IAAME,cAAc,GAAG,SAAjBA,cAAiB,GAAM;IACzBd,YAAY,CAAC,IAAD,CAAZ;;IAEA,IAAG,CAACL,IAAI,CAACoB,QAAN,IAAkB,CAACpB,IAAI,CAACqB,QAAxB,IAAoC,CAACrB,IAAI,CAACgB,IAA7C,EAAkD;MAC9C;IACH;;IAEDb,UAAU,CAAC,IAAD,CAAV;IAEAL,qBAAqB,CAACwB,QAAtB,CAA+BtB,IAA/B,EAAqCuB,IAArC,CAA0C,UAAAC,CAAC,EAAE;MACzCd,QAAQ,CAAC,QAAD,CAAR;IACH,CAFD,EAEGe,KAFH,CAES,UAAAC,GAAG,EAAI;MACZ,IAAGA,GAAG,EAAEC,QAAL,EAAeC,MAAf,KAA0B,GAA7B,EAAiC;QAC7BrB,eAAe,CAAC,mCAAD,CAAf;MACH,CAFD,MAEM;QACFA,eAAe,CAAC,2BAAD,CAAf;MACH;;MACDJ,UAAU,CAAC,KAAD,CAAV;IACH,CATD;EAUH,CAnBD;;EAqBA,oBACI,yCADJ;AAIH,CAvDD;;AAyDA,eAAeJ,QAAf"},"metadata":{},"sourceType":"module"}