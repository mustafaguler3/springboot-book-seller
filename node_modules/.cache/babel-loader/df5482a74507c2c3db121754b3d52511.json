{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\Mustafa GULER\\\\Desktop\\\\react-project\\\\react-product\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"C:\\\\Users\\\\Mustafa GULER\\\\Desktop\\\\react-project\\\\react-product\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"C:\\\\Users\\\\Mustafa GULER\\\\Desktop\\\\react-project\\\\react-product\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\Mustafa GULER\\\\Desktop\\\\react-project\\\\react-product\\\\src\\\\pages\\\\register\\\\register.page.js\";\n\nimport React from \"react\";\nimport { useEffect, useState } from \"react\";\nimport User from \"../../models/user\";\nimport { useSelector } from \"react-redux\";\nimport AuthenticationService from \"../../services/authentication.service\";\nimport { useNavigate } from \"react-router-dom\";\n\nvar Register = function Register() {\n  var _useState = useState(new User(\"\", \"\", \"\")),\n      _useState2 = _slicedToArray(_useState, 2),\n      user = _useState2[0],\n      setUser = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      submitted = _useState6[0],\n      setSubmitted = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      errorMessage = _useState8[0],\n      setErrorMessage = _useState8[1];\n\n  var currentUser = useSelector(function (state) {\n    return state.user;\n  });\n  var navigate = useNavigate(); //mounted\n\n  useEffect(function () {\n    if (currentUser?.id) {\n      navigate(\"/profile\");\n    }\n  }, []);\n\n  var handleChange = function handleChange(e) {\n    var _e$target = e.target,\n        name = _e$target.name,\n        value = _e$target.value;\n    setUser(function (prevState) {\n      return _objectSpread({}, prevState, _defineProperty({}, name, value));\n    });\n  };\n\n  var handleRegister = function handleRegister() {\n    setSubmitted(true);\n\n    if (!user.username || !user.password || !user.name) {\n      return;\n    }\n\n    setLoading(true);\n    AuthenticationService.register(user).then(function (_) {\n      navigate(\"/login\");\n    }).catch(function (err) {\n      if (err?.response?.status === 409) {\n        setErrorMessage(\"username or password is not valid\");\n      } else {\n        setErrorMessage(\"Unexpected error occurred\");\n      }\n\n      setLoading(false);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container mt-5\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card ms-auto me-auto p-3 shadow-lg custom-card\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faUserCircle,\n    className: \"ms-auto me-auto user-icon\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }\n  }), errorMessage && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"alert alert-danger\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 17\n    }\n  }, errorMessage))));\n};\n\nexport default Register;","map":{"version":3,"names":["React","useEffect","useState","User","useSelector","AuthenticationService","useNavigate","Register","user","setUser","loading","setLoading","submitted","setSubmitted","errorMessage","setErrorMessage","currentUser","state","navigate","id","handleChange","e","target","name","value","prevState","handleRegister","username","password","register","then","_","catch","err","response","status","faUserCircle"],"sources":["C:/Users/Mustafa GULER/Desktop/react-project/react-product/src/pages/register/register.page.js"],"sourcesContent":["import React from \"react\";\r\nimport { useEffect ,useState} from \"react\"\r\nimport User from \"../../models/user\"\r\nimport {useSelector} from \"react-redux\"\r\nimport AuthenticationService from \"../../services/authentication.service\"\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst Register = () =>{\r\n\r\n    const [user,setUser] = useState(new User(\"\",\"\",\"\"))\r\n    const [loading,setLoading] = useState(false)\r\n    const [submitted,setSubmitted] = useState(false)\r\n    const [errorMessage,setErrorMessage] = useState(\"\")\r\n\r\n    const currentUser = useSelector(state => state.user)\r\n\r\n    const navigate = useNavigate()\r\n\r\n    //mounted\r\n    useEffect(()=>{\r\n        if(currentUser?.id){\r\n            navigate(\"/profile\")\r\n        }\r\n    },[])\r\n\r\n\r\n    const handleChange = (e) => {\r\n        const {name,value} = e.target\r\n\r\n        setUser((prevState) => {\r\n            return {\r\n                ...prevState,\r\n                [name]: value\r\n            }\r\n        })\r\n    }\r\n\r\n    const handleRegister = () => {\r\n        setSubmitted(true);\r\n\r\n        if(!user.username || !user.password || !user.name){\r\n            return;\r\n        }\r\n\r\n        setLoading(true)\r\n\r\n        AuthenticationService.register(user).then(_=>{\r\n            navigate(\"/login\");\r\n        }).catch(err => {\r\n            if(err?.response?.status === 409){\r\n                setErrorMessage(\"username or password is not valid\")\r\n            }else {\r\n                setErrorMessage(\"Unexpected error occurred\")\r\n            }\r\n            setLoading(false)\r\n        })\r\n    }\r\n\r\n    return (\r\n        <>\r\n        <div className=\"container mt-5\">\r\n            <div className=\"card ms-auto me-auto p-3 shadow-lg custom-card\">\r\n\r\n            <FontAwesomeIcon icon={faUserCircle} className=\"ms-auto me-auto user-icon\" />\r\n\r\n            {errorMessage && \r\n                <div className=\"alert alert-danger\">\r\n                       {errorMessage} \r\n                 </div>   \r\n            }\r\n\r\n            </div>\r\n        </div>\r\n\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Register;"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,EAAoBC,QAApB,QAAmC,OAAnC;AACA,OAAOC,IAAP,MAAiB,mBAAjB;AACA,SAAQC,WAAR,QAA0B,aAA1B;AACA,OAAOC,qBAAP,MAAkC,uCAAlC;AACA,SAASC,WAAT,QAA4B,kBAA5B;;AAEA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,GAAK;EAAA,gBAEKL,QAAQ,CAAC,IAAIC,IAAJ,CAAS,EAAT,EAAY,EAAZ,EAAe,EAAf,CAAD,CAFb;EAAA;EAAA,IAEXK,IAFW;EAAA,IAENC,OAFM;;EAAA,iBAGWP,QAAQ,CAAC,KAAD,CAHnB;EAAA;EAAA,IAGXQ,OAHW;EAAA,IAGHC,UAHG;;EAAA,iBAIeT,QAAQ,CAAC,KAAD,CAJvB;EAAA;EAAA,IAIXU,SAJW;EAAA,IAIDC,YAJC;;EAAA,iBAKqBX,QAAQ,CAAC,EAAD,CAL7B;EAAA;EAAA,IAKXY,YALW;EAAA,IAKEC,eALF;;EAOlB,IAAMC,WAAW,GAAGZ,WAAW,CAAC,UAAAa,KAAK;IAAA,OAAIA,KAAK,CAACT,IAAV;EAAA,CAAN,CAA/B;EAEA,IAAMU,QAAQ,GAAGZ,WAAW,EAA5B,CATkB,CAWlB;;EACAL,SAAS,CAAC,YAAI;IACV,IAAGe,WAAW,EAAEG,EAAhB,EAAmB;MACfD,QAAQ,CAAC,UAAD,CAAR;IACH;EACJ,CAJQ,EAIP,EAJO,CAAT;;EAOA,IAAME,YAAY,GAAG,SAAfA,YAAe,CAACC,CAAD,EAAO;IAAA,gBACHA,CAAC,CAACC,MADC;IAAA,IACjBC,IADiB,aACjBA,IADiB;IAAA,IACZC,KADY,aACZA,KADY;IAGxBf,OAAO,CAAC,UAACgB,SAAD,EAAe;MACnB,yBACOA,SADP,sBAEKF,IAFL,EAEYC,KAFZ;IAIH,CALM,CAAP;EAMH,CATD;;EAWA,IAAME,cAAc,GAAG,SAAjBA,cAAiB,GAAM;IACzBb,YAAY,CAAC,IAAD,CAAZ;;IAEA,IAAG,CAACL,IAAI,CAACmB,QAAN,IAAkB,CAACnB,IAAI,CAACoB,QAAxB,IAAoC,CAACpB,IAAI,CAACe,IAA7C,EAAkD;MAC9C;IACH;;IAEDZ,UAAU,CAAC,IAAD,CAAV;IAEAN,qBAAqB,CAACwB,QAAtB,CAA+BrB,IAA/B,EAAqCsB,IAArC,CAA0C,UAAAC,CAAC,EAAE;MACzCb,QAAQ,CAAC,QAAD,CAAR;IACH,CAFD,EAEGc,KAFH,CAES,UAAAC,GAAG,EAAI;MACZ,IAAGA,GAAG,EAAEC,QAAL,EAAeC,MAAf,KAA0B,GAA7B,EAAiC;QAC7BpB,eAAe,CAAC,mCAAD,CAAf;MACH,CAFD,MAEM;QACFA,eAAe,CAAC,2BAAD,CAAf;MACH;;MACDJ,UAAU,CAAC,KAAD,CAAV;IACH,CATD;EAUH,CAnBD;;EAqBA,oBACI,uDACA;IAAK,SAAS,EAAC,gBAAf;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACI;IAAK,SAAS,EAAC,gDAAf;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBAEA,oBAAC,eAAD;IAAiB,IAAI,EAAEyB,YAAvB;IAAqC,SAAS,EAAC,2BAA/C;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAFA,EAICtB,YAAY,iBACT;IAAK,SAAS,EAAC,oBAAf;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACQA,YADR,CALJ,CADJ,CADA,CADJ;AAkBH,CArED;;AAuEA,eAAeP,QAAf"},"metadata":{},"sourceType":"module"}